<!DOCTYPE html>
<!-- saved from url=(0081)https://moodle2223.up.pt/pluginfile.php/218459/mod_resource/content/17/index.html -->
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="author" content="">
  <title>Project assignment</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <link rel="stylesheet" href="Project%20assignment_files/style.css">
  <script type="text/javascript" src="Project%20assignment_files/MathJax.js"></script>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
<style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 5px 0px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 5px; -webkit-border-radius: 5px; -moz-border-radius: 5px; -khtml-border-radius: 5px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 1px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: .7em}
.MathJax_MenuRadioCheck.RTL {right: .7em; left: auto}
.MathJax_MenuLabel {padding: 1px 2em 3px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #DDDDDD; margin: 4px 3px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: #606872; color: white}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><style type="text/css">.MathJax_Display {text-align: center; margin: 1em 0em; position: relative; display: block!important; text-indent: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; width: 100%}
.MathJax .merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MathJax .MJX-monospace {font-family: monospace}
.MathJax .MJX-sans-serif {font-family: sans-serif}
#MathJax_Tooltip {background-color: InfoBackground; color: InfoText; border: 1px solid black; box-shadow: 2px 2px 5px #AAAAAA; -webkit-box-shadow: 2px 2px 5px #AAAAAA; -moz-box-shadow: 2px 2px 5px #AAAAAA; -khtml-box-shadow: 2px 2px 5px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true'); padding: 3px 4px; z-index: 401; position: absolute; left: 0; top: 0; width: auto; height: auto; display: none}
.MathJax {display: inline; font-style: normal; font-weight: normal; line-height: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0}
.MathJax:focus, body :focus .MathJax {display: inline-table}
.MathJax.MathJax_FullWidth {text-align: center; display: table-cell!important; width: 10000em!important}
.MathJax img, .MathJax nobr, .MathJax a {border: 0; padding: 0; margin: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; vertical-align: 0; line-height: normal; text-decoration: none}
img.MathJax_strut {border: 0!important; padding: 0!important; margin: 0!important; vertical-align: 0!important}
.MathJax span {display: inline; position: static; border: 0; padding: 0; margin: 0; vertical-align: 0; line-height: normal; text-decoration: none}
.MathJax nobr {white-space: nowrap!important}
.MathJax img {display: inline!important; float: none!important}
.MathJax * {transition: none; -webkit-transition: none; -moz-transition: none; -ms-transition: none; -o-transition: none}
.MathJax_Processing {visibility: hidden; position: fixed; width: 0; height: 0; overflow: hidden}
.MathJax_Processed {display: none!important}
.MathJax_ExBox {display: block!important; overflow: hidden; width: 1px; height: 60ex; min-height: 0; max-height: none}
.MathJax .MathJax_EmBox {display: block!important; overflow: hidden; width: 1px; height: 60em; min-height: 0; max-height: none}
.MathJax_LineBox {display: table!important}
.MathJax_LineBox span {display: table-cell!important; width: 10000em!important; min-width: 0; max-width: none; padding: 0; border: 0; margin: 0}
.MathJax .MathJax_HitBox {cursor: text; background: white; opacity: 0; filter: alpha(opacity=0)}
.MathJax .MathJax_HitBox * {filter: none; opacity: 1; background: transparent}
#MathJax_Tooltip * {filter: none; opacity: 1; background: transparent}
@font-face {font-family: MathJax_Blank; src: url('about:blank')}
.MathJax .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style></head>
<body><div style="visibility: hidden; overflow: hidden; position: absolute; top: 0px; height: 1px; width: auto; padding: 0px; border: 0px; margin: 0px; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal;"><div id="MathJax_Hidden"></div></div><div id="MathJax_Message" style="display: none;"></div>
<header id="title-block-header">
<h1 class="title">Project assignment</h1>
<p class="subtitle">Programação (L.EIC009), April 2023</p>
</header>
<nav id="TOC">
<ul>
<li><a href="https://moodle2223.up.pt/pluginfile.php/218459/mod_resource/content/17/index.html#introduction">Introduction</a></li>
<li><a href="https://moodle2223.up.pt/pluginfile.php/218459/mod_resource/content/17/index.html#example-script">Example script</a></li>
<li><a href="https://moodle2223.up.pt/pluginfile.php/218459/mod_resource/content/17/index.html#constraints-logistics">Constraints &amp; logistics</a><ul>
<li><a href="https://moodle2223.up.pt/pluginfile.php/218459/mod_resource/content/17/index.html#deadline-and-delivery">Deadline and delivery</a></li>
<li><a href="https://moodle2223.up.pt/pluginfile.php/218459/mod_resource/content/17/index.html#group-work">Group work</a></li>
<li><a href="https://moodle2223.up.pt/pluginfile.php/218459/mod_resource/content/17/index.html#plagiarism">Plagiarism</a></li>
</ul></li>
<li><a href="https://moodle2223.up.pt/pluginfile.php/218459/mod_resource/content/17/index.html#provided-files">Provided files</a><ul>
<li><a href="https://moodle2223.up.pt/pluginfile.php/218459/mod_resource/content/17/index.html#getting-started">Getting started</a></li>
<li><a href="https://moodle2223.up.pt/pluginfile.php/218459/mod_resource/content/17/index.html#project-files">Project files</a></li>
<li><a href="https://moodle2223.up.pt/pluginfile.php/218459/mod_resource/content/17/index.html#the-runscript-program">The <code>runscript</code> program</a></li>
<li><a href="https://moodle2223.up.pt/pluginfile.php/218459/mod_resource/content/17/index.html#the-test-program">The <code>test</code> program</a></li>
</ul></li>
<li><a href="https://moodle2223.up.pt/pluginfile.php/218459/mod_resource/content/17/index.html#project-development">Project development</a><ul>
<li><a href="https://moodle2223.up.pt/pluginfile.php/218459/mod_resource/content/17/index.html#implementation-of-color">Implementation of <code>Color</code></a></li>
<li><a href="https://moodle2223.up.pt/pluginfile.php/218459/mod_resource/content/17/index.html#implementation-of-image">Implementation of <code>Image</code></a></li>
<li><a href="https://moodle2223.up.pt/pluginfile.php/218459/mod_resource/content/17/index.html#implementation-of-script">Implementation of <code>Script</code></a></li>
</ul></li>
<li><a href="https://moodle2223.up.pt/pluginfile.php/218459/mod_resource/content/17/index.html#advanced-functionality">Advanced functionality</a><ul>
<li><a href="https://moodle2223.up.pt/pluginfile.php/218459/mod_resource/content/17/index.html#median-filter">Median filter</a></li>
<li><a href="https://moodle2223.up.pt/pluginfile.php/218459/mod_resource/content/17/index.html#xpm2-file-loading-and-saving">XPM2 file loading and saving</a></li>
</ul></li>
<li><a href="https://moodle2223.up.pt/pluginfile.php/218459/mod_resource/content/17/index.html#evaluation-criteria">Evaluation criteria</a></li>
</ul>
</nav>
<h2 id="introduction">Introduction</h2>
<p>In this project you will use C++ to represent and process <a href="https://en.wikipedia.org/wiki/RGB">RGB</a> color images with 8-bits per RGB channel. Starting code is provided with the initial code skeletons, along with support for reading and writing images encoded in the <a href="https://en.wikipedia.org/wiki/PNG">PNG</a> format and test code for you to validate your work.</p>
<p>You will need to develop code for the following classes in the C++ namespace <code>prog</code>:</p>
<ul>
<li><code>prog::Color</code> to represent RGB colors;</li>
<li><code>prog::Image</code> to represent images where individual pixels are represented by <code>Color</code>; and</li>
<li><code>prog::Script</code> to process scripts that contain image manipulation commands.</li>
</ul>
<p>Some additional challenges are also presented in this document.</p>
<h2 id="example-script">Example script</h2>
<p>An example script is as follows:</p>
<pre><code>blank 750 380 
      0 0 0
fill 0 0 
     250 380
     255 0 0
add input/lion.png 
     255 255 255 
     0 0
fill 250 0 250 380 
     0 255 0
add input/lion.png 
     255 255 255 
     250 0
fill 500 0 
     250 380 
     0 0 255
add input/lion.png 
     255 255 255 
     500 0
save output/extra4.png</code></pre>
<p>As illustrated, the script file contains image creation and manipulation commands, explained below in this document. The <code>output/extra4.png</code> image produced by the final <code>save</code> command is shown below (Figure 1).</p>
<figure>
<img src="Project%20assignment_files/extra4.png" alt="Figure 1. Image produced by example script."><figcaption>Figure 1. Image produced by example script.</figcaption>
</figure>
<h2 id="constraints-logistics">Constraints &amp; logistics</h2>
<h3 id="deadline-and-delivery">Deadline and delivery</h3>
<p>The deadline is <strong>May 19, 2023, until 19:00</strong>.</p>
<p>Near the deadline, a form will be made available in Moodle for project delivery.</p>
<h3 id="group-work">Group work</h3>
<p>Groups must be formed by <strong>3 students of the same practical class</strong>. You must use the Moodle group selection pages to form groups.</p>
<p>An <strong>exception</strong> is made for working students (“trabalhadores estudantes”) or students without a practical class. These students may work alone if they prefer.</p>
<p>All the group members must collaborate for the development of the project.</p>
<h3 id="plagiarism">Plagiarism</h3>
<p>Your code will be analyzed for plagiarism. Remember that this is a group project, not a “group-of-groups” project.</p>
<p>All group elements must be able to explain all the code submitted by their group. Code that the group members are not able to explain will be treated as plagiarism.</p>
<p><strong>Plagiarism will result in the annulment of the project for involved groups and other possible disciplinary measures</strong>.</p>
<p>If you use code repositories (e.g.&nbsp;on GitHub), make sure your repository for the project is <strong>private</strong> to avoid unintended dissemination of your work.</p>
<h2 id="provided-files">Provided files</h2>
<h3 id="getting-started">Getting started</h3>
<p>Download the ZIP archive available at Moodle. Unzip the archive, then verify if compilation runs without errors.</p>
<pre><code>$ unzip project.zip
...
$ cd project
$ make
g++ -o runscript runscript.cpp Color.cpp Image.cpp Script.cpp PNG.cpp XPM2.cpp  -std=c++11 -pedantic -Wall -Wuninitialized -Werror -g -fsanitize=address -fsanitize=undefined
g++ -o test  test.cpp Color.cpp Image.cpp Script.cpp PNG.cpp XPM2.cpp  -std=c++11 -pedantic -Wall -Wuninitialized -Werror -g -fsanitize=address -fsanitize=undefined</code></pre>
<p>Two programs are generated: <code>runscript</code> for running image processing scripts, and <code>test</code> for validating your code using automated tests.</p>
<p>If you wish to recompile everything from scratch, execute <code>make clean all</code>.</p>
<pre><code>$ make clean all
rm -fr *.dSYM runscript test
g++ -o runscript runscript.cpp Color.cpp Image.cpp Script.cpp PNG.cpp XPM2.cpp  -std=c++11 -pedantic -Wall -Wuninitialized -Werror -g -fsanitize=address -fsanitize=undefined
g++ -o test  test.cpp Color.cpp Image.cpp Script.cpp PNG.cpp XPM2.cpp  -std=c++11 -pedantic -Wall -Wuninitialized -Werror -g -fsanitize=address -fsanitize=undefined</code></pre>
<h3 id="project-files">Project files</h3>
<p>The project files and directories are divided in two sets: those that you should change (Table 1 below), and others that must not be changed (Table 2).</p>
<table>
<caption>Table 1. Files/directories that can be changed.</caption>
<colgroup>
<col style="width: 33%">
<col style="width: 66%">
</colgroup>
<thead>
<tr class="header">
<th>File(s)/directory</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>Color.hpp</code><br><code>Color.cpp</code></td>
<td>Header and code files for <code>prog::Color</code>.</td>
</tr>
<tr class="even">
<td><code>Image.hpp</code><br> <code>Image.cpp</code></td>
<td>Header and code files for <code>prog::Image</code>.</td>
</tr>
<tr class="odd">
<td><code>Script.hpp</code><br><code>Script.cpp</code></td>
<td>Header and code files for <code>prog::Script</code>.</td>
</tr>
<tr class="even">
<td><code>XPM2.hpp</code><br><code>XPM2.cpp</code></td>
<td>Header and code files for load/save functions for images stored in the <a href="https://en.wikipedia.org/wiki/X_PixMap#XPM2">XPM2 format</a> (see the advanced functionality section).</td>
</tr>
<tr class="odd">
<td><code>output</code> directory</td>
<td>Initially empty, output images produced by scripts will be placed here.</td>
</tr>
</tbody>
</table>
<table>
<caption>Table 2. Files/directories that must not be changed/removed.</caption>
<colgroup>
<col style="width: 33%">
<col style="width: 66%">
</colgroup>
<thead>
<tr class="header">
<th>Files/directory</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>Makefile</code></td>
<td>Makefile to use for compilation.</td>
</tr>
<tr class="even">
<td><code>runscript.cpp</code></td>
<td>Program that executes an image processing script.</td>
</tr>
<tr class="odd">
<td><code>test.cpp</code></td>
<td>Test program.</td>
</tr>
<tr class="even">
<td><code>PNG.hpp</code> <br> <code>PNG.cpp</code> <br></td>
<td>Header and source file for PNG image reading, writing and comparison.</td>
</tr>
<tr class="odd">
<td><code>stb/stb_image.h</code><br> <code>stb/stb_image_write.h</code><br></td>
<td><a href="https://github.com/nothings/stb">stb</a> source code necessary for PNG support.</td>
</tr>
<tr class="even">
<td><code>input</code> directory</td>
<td>Directory containing image scripts and PNG images used as input.</td>
</tr>
<tr class="odd">
<td><code>expected</code> directory</td>
<td>Directory containing PNG files that correspond to the expected outputs.</td>
</tr>
</tbody>
</table>
<h3 id="the-runscript-program">The <code>runscript</code> program</h3>
<p>The <code>runscript</code> program can be invoked to process one or more image processing scripts, e.g.,</p>
<pre><code>./runscript scripts/basic_blank1.txt </code></pre>
<p>or</p>
<pre><code>./runscript scripts/basic_blank1.txt scripts/basic_blank2.txt</code></pre>
<h3 id="the-test-program">The <code>test</code> program</h3>
<p>The <code>test</code> program can be invoked to execute one or more automated tests:</p>
<ul>
<li><p>Color tests</p>
<pre><code>./test Color</code></pre></li>
<li><p>Basic image I/O tests</p>
<pre><code>./test basic</code></pre></li>
<li><p>Test all scripts related to command <code>x</code>, where <code>x</code> is the command name.</p>
<pre><code>./test x</code></pre></li>
<li><p>Run all script tests - supply no arguments.</p>
<pre><code>./test</code></pre></li>
</ul>
<p>Except in the case of color tests, the program will produce a <code>test_log.txt</code> file containing detailed test failure information.</p>
<h2 id="project-development">Project development</h2>
<h3 id="implementation-of-color">Implementation of <code>Color</code></h3>
<p>A <code>Color</code> object represents an RGB color, that is, a color defined by 3 integer values which are the values for the red, green, and blue color channels for the color at stake. Each of these values takes one byte and can take values ranging from 0 to 255, as defined by type <code>rgb_value</code> in <code>Color.hpp</code>.</p>
<p><strong>What must be done?</strong></p>
<p>You should define appropriate fields to represent the RGB values, and implement the member functions already provided in the initial skeleton. These are described in Table 3.</p>
<p>If you find it necessary, you may define other member functions in the class.</p>
<p><strong>Validation</strong></p>
<p>Execute <code>./test Color</code> in the command line. The test will fail until the code in <code>Color</code> meets the expected functionality, e.g.,</p>
<pre><code>$ ./test Color
Assertion failed: (a.red() == 1), function color_tests, file test.cpp, line 109.
Abort trap: 6</code></pre>
<table>
<caption>Table 3. <code>Color</code> member functions.</caption>
<colgroup>
<col style="width: 33%">
<col style="width: 66%">
</colgroup>
<thead>
<tr class="header">
<th>Function(s)</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>Color()</code></td>
<td>Default constructor. By default, the color should correspond to black, i.e., <code>(0, 0, 0)</code>.</td>
</tr>
<tr class="even">
<td><code>Color(const Color&amp; c)</code></td>
<td>Copy constructor.</td>
</tr>
<tr class="odd">
<td><code>Color(rgb_value r, rgb_value g, rgb_value b)</code></td>
<td>Constructor using supplied <code>(r, g, b)</code> values.</td>
</tr>
<tr class="even">
<td><code>rgb_value red() const</code><br><code>rgb_value green() const</code><br><code>rgb_value blue() const</code></td>
<td>Get values for individual RGB color channels.</td>
</tr>
<tr class="odd">
<td><code>rgb_value&amp; red()</code><br><code>rgb_value&amp; green()</code><br><code>rgb_value&amp; blue()</code></td>
<td>Get (mutable) references for individual RGB color channels.</td>
</tr>
</tbody>
</table>
<h3 id="implementation-of-image">Implementation of <code>Image</code></h3>
<p>An <code>Image</code> object represents an image. It has an associated width (<code>width()</code>) and height (<code>height()</code>), and must hold a 2D matrix of colors with these dimensions. Each <code>(x, y)</code> position in this matrix, where <code>0 &lt;= x &lt; width()</code> and <code>0 &lt;= y &lt; height()</code>, is called a <strong>pixel</strong>. Pixel <code>(0,0)</code> corresponds to the upper-left corner of the image, and pixel <code>(width() - 1, height() - 1)</code> corresponds to the lower-right corner of the image, as illustrated in Figure 2 below.</p>
<figure>
<img src="Project%20assignment_files/image_coords.png" alt="Figure 2. Coordinate system for images."><figcaption>Figure 2. Coordinate system for images.</figcaption>
</figure>
<p><strong>What must be done?</strong></p>
<p>You should define appropriate fields to represent the image dimensions and the pixel matrix, and implement the member functions already provided in the initial skeleton. These are described in Table 4.</p>
<p>If you find it necessary, you may define other member functions in the class.</p>
<p><strong>Validation</strong></p>
<p>Execute <code>./test basic</code> in the command line. One or more tests will fail until the code in <code>Image</code> meets the expected functionality. You should consult the <code>test_log.txt</code> file generated by the <code>test</code> program to obtain detailed error information.</p>
<pre><code>== 5 tests to execute  ==
[1] basic_blank1: fail
[2] basic_blank2: fail
[3] basic_blank3: fail
[4] basic_open1: fail
[5] basic_open2: fail
== TEST EXECUTION SUMMARY ==
Total tests: 5
Passed tests: 0
Failed tests: 5
See test_log.txt for details.</code></pre>
<table>
<caption>Table 4. <code>Image</code> member functions.</caption>
<colgroup>
<col style="width: 33%">
<col style="width: 66%">
</colgroup>
<thead>
<tr class="header">
<th>Function(s)</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>Image(int w, int h, const Color&amp; fill = { 255, 255, 255 })</code></td>
<td>Create image with width <code>w</code>, height <code>h</code>, and all pixels set to color <code>fill</code>. White is the default fill value, i.e., <code>(255, 255, 255)</code>.</td>
</tr>
<tr class="even">
<td><code>~Image()</code></td>
<td>Destructor. <strong>If you use dynamically allocated memory explicitly, the destructor should take care of releasing that memory.</strong> Otherwise, the destructor code can be empty.</td>
</tr>
<tr class="odd">
<td><code>int width() const</code></td>
<td>Get image width.</td>
</tr>
<tr class="even">
<td><code>int height() const</code></td>
<td>Get image height.</td>
</tr>
<tr class="odd">
<td><code>Color&amp; at(int x, int y)</code></td>
<td>Get mutable reference to the value of pixel <code>(x, y)</code>, where <code>0 &lt;= x &lt; width()</code> and <code>0 &lt;= y &lt; height()</code>.</td>
</tr>
<tr class="even">
<td><code>const Color&amp; at(int x, int y) const</code></td>
<td>Get read-only reference to the value of pixel <code>(x, y)</code>.</td>
</tr>
</tbody>
</table>
<h3 id="implementation-of-script">Implementation of <code>Script</code></h3>
<p>A <code>Script</code> object encapsulates the execution of an image processing script. The class has the public member functions described in Table 5. Partial code is provided as a starting point for the implementation.</p>
<p>The image processing commands are separated in three groups:</p>
<ol type="1">
<li>Commands for image initialization and PNG image I/O (<strong>already implemented</strong>), listed in Table 5;</li>
<li>Script commands for simple image manipulations, listed in Table 6; and</li>
<li>Script commands for manipulation that alter image dimensions, listed in Table 7.</li>
</ol>
<table>
<caption>Table 5. Public member functions in <code>Script</code>.</caption>
<colgroup>
<col style="width: 33%">
<col style="width: 66%">
</colgroup>
<thead>
<tr class="header">
<th>Function(s)</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>Script(const std::string&amp; filename)</code></td>
<td><strong>[ALREADY IMPLEMENTED]</strong> Constructor, with <code>filename</code> indicating the script to be processed. Initially, no image should be loaded (private field <code>image</code> is set to <code>nullptr</code>). The input file should not be processed until <code>run()</code> is called (see below).</td>
</tr>
<tr class="even">
<td><code>~Script()</code></td>
<td><strong>[ALREADY IMPLEMENTED]</strong> Destructor. <strong>If an image is loaded, its memory is released.</strong></td>
</tr>
<tr class="odd">
<td><code>run()</code></td>
<td><strong>[PARTIALLY IMPLEMENTED]</strong> Process commands in the script file.</td>
</tr>
</tbody>
</table>
<table>
<caption>Table 6. Script commands for initialization and I/O.</caption>
<colgroup>
<col style="width: 33%">
<col style="width: 66%">
</colgroup>
<thead>
<tr class="header">
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>blank w h r g b</code></td>
<td><strong>[ALREADY IMPLEMENTED]</strong> Defines a new image with dimensions <code>w</code> <span class="math inline"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo&gt;&amp;#x00D7;&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1" style="width: 0.959em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.776em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.551em, 1000.64em, 2.325em, -999.998em); top: -2.184em; left: 0em;"><span class="mrow" id="MathJax-Span-2"><span class="mo" id="MathJax-Span-3" style="font-family: MathJax_Main;">×</span></span><span style="display: inline-block; width: 0px; height: 2.188em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.053em; border-left: 0px solid; width: 0px; height: 0.725em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>×</mo></math></span></span><script type="math/tex" id="MathJax-Element-1">\times</script></span> <code>h</code> and all pixels set to color <code>(r, g, b)</code>. The current image, if any, is discarded.</td>
</tr>
<tr class="even">
<td><code>open filename</code></td>
<td><strong>[ALREADY IMPLEMENTED]</strong> Reads a new image in PNG format from <code>filename</code>. The current image, if any, is discarded.</td>
</tr>
<tr class="odd">
<td><code>save filename</code></td>
<td><strong>[ALREADY IMPLEMENTED]</strong> Saves current image in PNG format to <code>filename</code>.</td>
</tr>
</tbody>
</table>
<table>
<caption>Table 7. Script commands for simple image manipulations (image dimensions are not altered).</caption>
<colgroup>
<col style="width: 33%">
<col style="width: 66%">
</colgroup>
<thead>
<tr class="header">
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>invert</code></td>
<td>Transforms each individual pixel <code>(r, g, b)</code> to <code>(255-r,255-g,255-b)</code>.</td>
</tr>
<tr class="even">
<td><code>to_gray_scale</code></td>
<td>Transforms each individual pixel <code>(r, g, b)</code> to <code>(v, v, v)</code> where <code>v = (r + g + b)/3</code>. You should use integer division without rounding to compute <code>v</code>.</td>
</tr>
<tr class="odd">
<td><code>replace r1 g1 b1 r2 g2 b2</code></td>
<td>Replaces all <code>(r1,  g1, b1)</code> pixels by <code>(r2,  g2, b2)</code>.</td>
</tr>
<tr class="even">
<td><code>fill x y w h r g b</code></td>
<td>Assign <code>(r, g, b)</code> to all pixels contained in rectangle defined by top-left corner <code>(x, y)</code>, width <code>w</code>, and height <code>h</code>, i.e., all pixels <code>(x', y')</code> such that <code>x &lt;= x' &lt; x + w</code> and <code>y &lt;= y' &lt; y + h</code>. You may assume that the rectangle is always within the current image bounds.</td>
</tr>
<tr class="odd">
<td><code>h_mirror</code></td>
<td>Mirror image horizontally. Pixels <code>(x, y)</code> and <code>(width() - 1 - x, y)</code> for all <code>0 &lt;= x &lt; width() / 2</code> and <code>0 &lt;= y &lt; height()</code>.</td>
</tr>
<tr class="even">
<td><code>v_mirror</code></td>
<td>Mirror image vertically. Pixels <code>(x, y)</code> and <code>(x, height() - 1 - y)</code> for all <code>0 &lt;= x &lt; width()</code> and <code>0 &lt;= y &lt; height() / 2</code>.</td>
</tr>
<tr class="odd">
<td><code>add filename r g b x y</code></td>
<td>Copy all pixels from image stored in PNG file <code>filename</code>, except pixels in that image with “neutral” color <code>(r, g, b)</code>, to the rectangle of the current image with top-left corner <code>(x, y)</code> of the current image. The rectangle affected in the current image has the same dimensions as the given image, and you may assume that rectangle is within the current image bounds.</td>
</tr>
</tbody>
</table>
<table>
<caption>Table 8. Script commands for dimension-changing operations</caption>
<colgroup>
<col style="width: 33%">
<col style="width: 66%">
</colgroup>
<thead>
<tr class="header">
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>crop x y w h</code></td>
<td>Crop the image, reducing it to all pixels contained in the rectangle defined by top-left corner <code>(x, y)</code>, width <code>w</code>, and height <code>h</code>.You may assume that the rectangle is always within the current image bounds.</td>
</tr>
<tr class="even">
<td><code>rotate_left</code></td>
<td>Rotate image left by 90 degrees.</td>
</tr>
<tr class="odd">
<td><code>rotate_right</code></td>
<td>Rotate image right by 90 degrees.</td>
</tr>
</tbody>
</table>
<p><strong>What must be done?</strong></p>
<p>Implement appropriate code to parse the commands from the input script file in <code>Script</code>, and transform the current image accordingly.</p>
<p><strong>Validation</strong></p>
<p>Execute <code>./test command</code> in the command line where <code>command</code> is the command that you wish to test. For instance, <code>./test invert</code> will test all scripts related to the <code>invert</code> command:</p>
<pre><code>$ ./test invert
== 4 tests to execute  ==
[1] invert1: fail
[2] invert2: fail
[3] invert3: fail
[4] invert4: fail
== TEST EXECUTION SUMMARY ==
Total tests: 4
Passed tests: 0
Failed tests: 4
See test_log.txt for details.</code></pre>
<h2 id="advanced-functionality">Advanced functionality</h2>
<p>Advanced functionality commands are summarized in Table 9. See the corresponding explanations below in this section.</p>
<table>
<caption>Table 9. Advanced functionality commands.</caption>
<colgroup>
<col style="width: 33%">
<col style="width: 66%">
</colgroup>
<thead>
<tr class="header">
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>median_filter ws</code></td>
<td>Apply a median filter with window size <code>ws &gt;= 3</code> to the current image.</td>
</tr>
<tr class="even">
<td><code>xpm2_open filename</code></td>
<td>Read image stored in the XPM2 file format. This command should result in a call to <code>Image *loadFromXPM2(const std::string &amp;file)</code> declared in <code>XPM2.hpp</code>. This function in turn needs to be implemented.</td>
</tr>
<tr class="odd">
<td><code>xpm2_save filename</code></td>
<td>Save image to the XPM2 file format. This command should result in a call to <code>void saveToXPM2(const std::string&amp; file, const Image *img)</code> declared in <code>XPM2.hpp</code>. This function in turn needs to be implemented.</td>
</tr>
</tbody>
</table>
<h3 id="median-filter">Median filter</h3>
<p>The general idea to replace each pixel <code>(x, y)</code> by “a median pixel” of neighboring pixels to <code>(x,y)</code> inside a window size of size <code>ws * ws</code>, where <code>ws &gt;= 3</code> is always an odd number (3, 5, 7, …). For a generic description of the median filter algorithm, you may check <a href="https://en.wikipedia.org/wiki/Median_filter">the Wikipedia page for the algorithm</a>.</p>
<p>In this project the median filter algorithm variant obeys the following two conditions:</p>
<ol type="1">
<li>Neighboring pixels of <code>(x,y)</code> are all pixels <code>(nx, ny)</code> such that:
<ul>
<li><code>max(0, x - ws / 2) &lt;= nx &lt;= min(width() - 1, x + ws / 2)</code>, where <code>ws / 2</code> denotes integer division, and</li>
<li><code>max(0, y - ws / 2) &lt;= ny &lt;= min(height() - 1, y + ws /2)</code>.</li>
<li>Note that, under these conditions, the neighborhood always includes <code>(x, y)</code> itself. The definition also implies that there will be <code>ws * ws</code> pixels in the neighborhood of a pixel, e.g.&nbsp;<code>9 = 3 * 3</code> if <code>ws == 3</code> or <code>25 = 5 * 5</code> if <code>ws == 5</code> as illustrated in Figure 3, except for boundary pixels, e.g., the neighborhood of pixel <code>(0, 0)</code> will have just 4 pixels for <code>ws == 3</code>: <code>(0, 0)</code>, <code>(0, 1)</code>, <code>(1,0)</code>, and <code>(1, 1)</code>.</li>
</ul></li>
<li>The “median pixel” should be derived from the <a href="https://en.wikipedia.org/wiki/Median">median</a> values of each RGB channel separately: the <code>(r, g, b)</code> color for a pixel <code>(x, y)</code> is mapped onto <code>(mr, mg, mb)</code> where <code>mr</code>, <code>mg</code> and <code>mg</code> are the median values of pixels for the corresponding channels in the neighborhood of <code>(x, y)</code> with window size <code>ws</code>.</li>
</ol>
<figure>
<img src="Project%20assignment_files/neighbors.png" alt="Figure 3. Pixel (x,y) (in orange), and its neighbors for window sizes of 3 (yellow) and 5 (yellow and white)."><figcaption>Figure 3. Pixel <code>(x,y)</code> (in orange), and its neighbors for window sizes of 3 (yellow) and 5 (yellow and white).</figcaption>
</figure>
<p><strong>Validation</strong></p>
<p>Execute <code>./test median_filter</code> in the command line.</p>
<h3 id="xpm2-file-loading-and-saving">XPM2 file loading and saving</h3>
<p>The <a href="https://en.wikipedia.org/wiki/X_PixMap#XPM2">XPM2 file format</a> is a text format for representing images, illustrated in Figure 4. In this project we will consider XPM2 images with the following restrictions:</p>
<ul>
<li>The XPM2 values section <code>w h n c</code> will always have <code>c == 1</code> (1 character per pixel).</li>
<li>The XPM2 colors section contains only <code>c</code> (“color”) entries (not <code>m</code>, <code>g</code> or <code>s</code> entries), and colors are encoded only using hexadecimal values called “hexcodes” (strings with color names are not used).</li>
</ul>
<figure>
<img src="Project%20assignment_files/xpm2.png" alt="Figure 4. The XPM2 file format."><figcaption>Figure 4. The XPM2 file format.</figcaption>
</figure>
<p><strong>What must be done?</strong></p>
<p>Implement the necessary logic in <code>Script</code> for reading the <code>xpm2_open</code> and <code>xpm2_save</code> commands.</p>
<p>Define the code for loading and saving XPM2 files in <code>XPM2.cpp</code>.</p>
<p><strong>Validation</strong></p>
<p>Execute <code>./test xpm2_open</code> and <code>./test xpm2_save</code> in the command line, or simply <code>./test xpm2</code> to run all these tests.</p>
<h2 id="evaluation-criteria">Evaluation criteria</h2>
<ol type="1">
<li><strong>[85 %]</strong> Correctness of implementation - this means the code should work as expected and run without memory errors (buffer overflows, memory leaks, dangling references, etc), with the following components:
<ul>
<li><strong>[30 %]</strong> Basic color and Image representation<br>
</li>
<li><strong>[25 %]</strong> Simple image manipulations</li>
<li><strong>[15 %]</strong> Dimension-changing operations</li>
<li><strong>[15 %]</strong> Advanced functionality</li>
</ul></li>
<li><strong>[15 %]</strong> Well-structured, commented code; appropriate use of variables and member fields.</li>
</ol>


<div style="position: absolute; width: 0px; height: 0px; overflow: hidden; padding: 0px; border: 0px; margin: 0px;"><div id="MathJax_Font_Test" style="position: absolute; visibility: hidden; top: 0px; left: 0px; width: auto; padding: 0px; border: 0px; margin: 0px; white-space: nowrap; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; font-size: 40px; font-weight: normal; font-style: normal; font-family: MathJax_Size4, sans-serif;"></div></div></body></html>